{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block content %}
<div class="container">
      <div class="row justify-content-center">
        <div class="col-8">
          <h1 class="mt-2">Budget Plan for {{ budget_month_date }}</h1>
          <div class="mt-2"></div>
          <p>What monthly budget do you need?</p>
          <div class="mt-2"></div>
  <form method="post">
    {% csrf_token %}
    {{ form|crispy }}
    <div class="mt-2"></div>
    <button type="submit" class="btn btn-primary">Show plan</button>
  </form>
 <div class="mt-2"></div>
 {% if budgets_for_selected_month %}
<table class="table table-dark table-bordered">
<thead>
<tr>
<th scope="col">Category</th>
<th scope="col">Monthly Budget</th>
<th scope="col">Monthly Spend</th>

</thead>
<tbody>
{% endif %}
{% if budgets_for_selected_month %}
    {% for budget in budgets_for_selected_month %}
        <tr>
        <td>{{ budget.category }}</td>
        <td>${{ budget.budget_amount | floatformat:2 }}</td>
        <td>${{ budget.monthly_spend | floatformat:2 }}</td>
       </tr>
    {% endfor %}


</tbody>
</table>
<p><strong>Total budget this month: $</strong>{{ budget_total|floatformat:2 }}
<p><strong>Total spend this month: $</strong>{{ total_spend|floatformat:2 }}
<p><strong>Total budget left: $</strong>{{total_left| floatformat:2}}
{% endif %}
{% endblock %}
   </div>
</div>
</div>
